{% extends "base.html" %}
{% block content %}

<div class="card card-soft p-4">
  <h4 class="mb-4">Actualizar Transacci√≥n</h4>

  <form method="POST">
    {% csrf_token %}

    <div class="row">
      <!-- Usuario -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Usuario</label>
        <select class="form-select" name="usuario">
          {% for u in usuarios %}
          <option value="{{ u.id_usuario }}" {% if u.id_usuario == transaccion.usuario.id_usuario %}selected{% endif %}>
            {{ u.nombre }} {{ u.apellido }}
          </option>
          {% endfor %}
        </select>
      </div>

      <!-- Banco Usuario -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Banco usuario</label>
        <input class="form-control" type="text" name="banco_usuario"
               value="{{ transaccion.banco_usuario }}">
      </div>

      <!-- Vendedor -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Vendedor</label>
        <select class="form-select" name="vendedor">
          {% for v in vendedores %}
          <option value="{{ v.id_vendedor }}" {% if v.id_vendedor == transaccion.vendedor.id_vendedor %}selected{% endif %}>
            {{ v.nombre }}
          </option>
          {% endfor %}
        </select>
      </div>

      <!-- Banco Vendedor -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Banco vendedor</label>
        <input class="form-control" type="text" name="banco_vendedor"
               value="{{ transaccion.banco_vendedor }}">
      </div>

      <!-- Monto total -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Monto total</label>
        <input class="form-control" type="number" step="0.01" name="monto_total"
               value="{{ transaccion.monto_total }}">
      </div>

      <!-- Tipo -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Tipo</label>
        <select class="form-select" name="tipo">
          <option value="pago" {% if transaccion.tipo == 'pago' %}selected{% endif %}>Pago</option>
          <option value="reembolso" {% if transaccion.tipo == 'reembolso' %}selected{% endif %}>Reembolso</option>
        </select>
      </div>

      <!-- Estado -->
      <div class="col-md-6 mb-3">
        <label class="form-label">Estado</label>
        <select class="form-select" name="estado">
          <option value="pendiente" {% if transaccion.estado == 'pendiente' %}selected{% endif %}>Pendiente</option>
          <option value="completada" {% if transaccion.estado == 'completada' %}selected{% endif %}>Completada</option>
        </select>
      </div>
    </div>

    <button class="btn btn-primary mt-3" type="submit">Actualizar</button>
    <a class="btn btn-secondary mt-3" href="{% url 'ver_transaccion' %}">Cancelar</a>

  </form>
</div>

{% endblock %}
